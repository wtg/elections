<div class="container page shadow" ng-if="!dataLoaded">
    <div class="row">
        <div class="loader">Loading...</div>
    </div>
</div>
<div class="container page shadow" ng-if="dataLoaded">
    <div class="row">
        <div class="col-sm-12 col-md-8">
            <h1 ng-bind="'Nominations for ' + formName()"></h1>
        </div>
        <div class="col-sm-12 col-md-4">
            <div class="btn-group pull-right header-btns">
                <button class="btn btn-default" ng-if="editPermissions" ng-click="toggleShowSubmitNominations()">
                    <span ng-if="showSubmitNominations">View Nominations</span>
                    <span ng-if="!showSubmitNominations">Submit Nominations</span>
                </button>
                <button class="btn btn-default btn-primary" ng-click="backToCandidate()">
                    Back to Candidate
                </button>
            </div>
        </div>
    </div>
    <hr/>
    <div class="row" ng-if="candidate.offices.length > 1">
        <div class="col-xs-12">
            <ul class="nav nav-tabs">
                <li ng-repeat="o in candidate.offices" role="presentation" ng-class="{'active': o.office_id === selectedOfficeId}">
                    <a ng-click="changeSelectedOffice(o.office_id)" ng-bind="o.office_name"></a>
                </li>
            </ul>
            <br/>
        </div>
    </div>
    <div class="row" ng-if="showSubmitNominations">
        <div class="col-xs-12">
            <div class="row" ng-repeat-start="n in nominations">
                <div class="col-sm-5" ng-class="{'col-sm-offset-1':!nominationsSubmitted}">
                    <div class="form-group" ng-class="colorInputs(n)">
                        <input class="form-control" placeholder="RIN" ng-model="n.rin" ng-change="enableNominationsPending()">
                    </div>
                </div>
                <div class="col-sm-5" ng-class="colorInputs(n)">
                    <input class="form-control" placeholder="Initials" ng-model="n.initials" ng-change="enableNominationsPending()">
                </div>
                <div class="col-sm-2">
                    <p class="form-control-static text-success" ng-if="n.status === 'success'">
                        <i class="fa fa-check"></i> Valid
                    </p>
                    <p class="form-control-static text-danger" ng-if="n.status === 'invalid'">
                        <i class="fa fa-exclamation-circle"></i> Invalid RIN
                    </p>
                    <p class="form-control-static text-danger" ng-if="n.status === 'initials'">
                        <i class="fa fa-exclamation-circle"></i> Invalid Initials for RIN
                    </p>
                    <p class="form-control-static text-warning" ng-if="n.status === 'already'">
                        <i class="fa fa-exclamation-triangle"></i> Already nominated
                    </p>
                    <p class="form-control-static text-warning" ng-if="n.status === 'wrongclass'">
                        <i class="fa fa-exclamation-triangle"></i> Invalid cohort
                    </p>

                </div>
            </div>
            <br ng-repeat-end />
            <div class="row">
                <div class="col-md-4 col-md-offset-4 text-center">
                    <button class="btn btn-primary" ng-click="submit()">Submit Nominations</button>
                </div>
            </div>
        </div>
    </div>
    <div class="row" ng-if="!showSubmitNominations">
        <ul class="list-group" ng-repeat="o in candidate.offices" ng-if="o.office_id === selectedOfficeId">
            <div class="col-md-4" ng-repeat="i in [0,1,2]">
                <div class="list-group-item" ng-repeat="nom in o.nominations track by $index" ng-if="$index % 3 == i">
                    <span ng-bind="nom.nomination_rin"></span> <span class="text-muted" ng-bind="nom.date | date:'medium'"></span>
                </div>
            </div>
        </ul>
    </div>
    <ng-include src="'partials/footer.html'"></ng-include>
</div>
